# ğŸ¯ PROJEKT-BRIEFING: TravelTracker Pro

> **Kopiere diesen Text in jeden neuen Chat mit Claude, damit er sofort weiÃŸ, woran wir arbeiten!**

---

## ğŸ“± PROJEKT-ÃœBERSICHT

**Projektname:** TravelTracker Pro
**Typ:** Next.js Web-Anwendung mit Supabase Backend
**Zweck:** Reiseplanungs- und Ausgabenverwaltungs-App fÃ¼r Gruppen

---

## ğŸ› ï¸ TECH STACK

- **Framework:** Next.js 14+ (App Router)
- **Sprache:** TypeScript
- **Styling:** Tailwind CSS
- **Datenbank:** Supabase (PostgreSQL)
- **Authentifizierung:** Supabase Auth (Email/Passwort)
- **Deployment:** [Vercel/Netlify/etc. - deine Plattform hier eintragen]

---

## ğŸ“‚ PROJEKTSTRUKTUR

```
traveltracker-pro/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                          # Hauptseite mit Auth & Dashboard
â”‚   â”œâ”€â”€ reset-password/
â”‚   â”‚   â””â”€â”€ page.tsx                      # Passwort-Reset-Seite
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ admin/
â”‚           â””â”€â”€ create-user/
â”‚               â””â”€â”€ route.ts              # API fÃ¼r Admin-User-Erstellung
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts                       # Supabase Client
â”œâ”€â”€ .env.local                            # Environment Variables (NICHT auf GitHub!)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸ—„ï¸ DATENBANK-SCHEMA (Supabase)

### Tabellen:

#### 1. **users**
```sql
- id: UUID (Primary Key, Foreign Key zu auth.users)
- email: TEXT (UNIQUE)
- name: TEXT
- created_at: TIMESTAMP
- last_sign_in_at: TIMESTAMP
- avatar_url: TEXT (optional)
- role: TEXT (Werte: 'admin', 'member')
```

#### 2. **trips**
```sql
- id: UUID (Primary Key)
- name: TEXT
- destination: TEXT
- flag: TEXT (Emoji)
- start_date: DATE
- end_date: DATE
- budget: NUMERIC
- currency: TEXT
- status: TEXT
- created_by: UUID (Foreign Key zu users)
- created_at: TIMESTAMP
```

#### 3. **trip_members**
```sql
- id: UUID (Primary Key)
- trip_id: UUID (Foreign Key zu trips)
- user_id: UUID (Foreign Key zu users)
- role: TEXT (Werte: 'owner', 'admin', 'member')
- joined_at: TIMESTAMP
- UNIQUE(trip_id, user_id)
```

#### 4. **expenses**
```sql
- id: UUID (Primary Key)
- trip_id: UUID (Foreign Key zu trips)
- user_id: UUID (Foreign Key zu users)
- category: TEXT
- description: TEXT
- amount: NUMERIC
- paid_by: TEXT
- split_between: TEXT[] (Array)
- date: DATE
- created_at: TIMESTAMP
```

#### 5. **itinerary**
```sql
- id: UUID (Primary Key)
- trip_id: UUID (Foreign Key zu trips)
- day: INTEGER
- time: TEXT
- title: TEXT
- details: TEXT
- type: TEXT
- created_at: TIMESTAMP
```

#### 6. **packing_list**
```sql
- id: UUID (Primary Key)
- trip_id: UUID (Foreign Key zu trips)
- category: TEXT
- item: TEXT
- packed: BOOLEAN
- created_at: TIMESTAMP
```

#### 7. **locations**
```sql
- id: UUID (Primary Key)
- trip_id: UUID (Foreign Key zu trips)
- name: TEXT
- address: TEXT
- type: TEXT (Werte: 'hotel', 'restaurant', 'activity', 'transport', 'other')
- notes: TEXT
- created_at: TIMESTAMP
```

---

## ğŸ” AUTHENTIFIZIERUNG

**System:** Supabase Auth mit Email/Passwort

**Features:**
- âœ… Login mit Email/Passwort
- âœ… Passwort zurÃ¼cksetzen per Email
- âœ… Admin kann neue User erstellen
- âœ… Row Level Security (RLS) aktiviert
- âœ… Automatischer Schutz durch Middleware

**Rollen:**
- `admin`: Kann Benutzer verwalten, alle Features nutzen
- `member`: Kann nur eigene Daten sehen/bearbeiten

---

## ğŸ¨ DESIGN & UI

**Farben:**
- Primary: Teal (teal-600, teal-700)
- Background: Gradient (blue-50 â†’ teal-50 â†’ green-50)
- Success: Green
- Error: Red
- Warning: Yellow

**Navigation:**
- Sticky Header mit Logo und Trip-Info
- Tab-Navigation: Ãœbersicht, Reisen, Ausgaben, Plan, Packliste, Karte, Team, Abrechnung, Admin

**Komponenten:**
- Modals fÃ¼r Formulare
- Cards fÃ¼r Daten-Anzeige
- Tables fÃ¼r Listen
- Toast-Notifications (Alerts)

---

## ğŸ“‹ HAUPT-FEATURES

### âœ… Implementiert:

1. **Authentifizierung**
   - Login/Logout
   - Passwort zurÃ¼cksetzen
   - Admin-User-Management
   
2. **Multi-User Support**
   - User kÃ¶nnen mehreren Trips beitreten
   - Rollen-basierte Berechtigungen
   
3. **Admin-Panel**
   - Benutzer erstellen/lÃ¶schen
   - Passwort-Reset-Links versenden
   - System-Ãœbersicht

### ğŸš§ In Arbeit / Geplant:

4. **Reiseverwaltung**
   - Trips erstellen/bearbeiten/lÃ¶schen
   - Trip-Mitglieder einladen
   - Trip-Status verwalten

5. **Ausgabenverwaltung**
   - Ausgaben erfassen
   - Kategorisierung
   - Split-Berechnungen
   - Abrechnungs-System

6. **Reiseplanung**
   - Tagesplan (Itinerary)
   - Packliste
   - Locations/Orte speichern

7. **Karten-Integration**
   - Locations auf Karte anzeigen
   - Route planen

---

## ğŸ”§ ENVIRONMENT VARIABLES

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx  # NUR fÃ¼r Server-Side API Routes!
```

---

## ğŸ“ WICHTIGE HINWEISE FÃœR NEUE CHATS

### Wenn du Hilfe bei diesem Projekt brauchst, teile Claude:

1. **Was du tun mÃ¶chtest:**
   - Welches Feature willst du implementieren/Ã¤ndern?
   - Welches Problem hast du?

2. **Betroffene Dateien:**
   - Welche Datei(en) sind relevant?
   - Lade die Datei hoch, wenn mÃ¶glich

3. **Kontext:**
   - Welchen Tab/Bereich der App betrifft es?
   - FÃ¼r welche User-Rolle? (Admin/Member)

4. **Technische Details:**
   - Gibt es Fehlermeldungen? (Kopiere sie!)
   - Was hast du bereits versucht?

### Beispiel fÃ¼r einen guten neuen Chat-Start:

```
Ich arbeite an TravelTracker Pro (siehe PROJECT-BRIEFING.md).

Ich mÃ¶chte: [Feature X implementieren / Problem Y lÃ¶sen]

Betroffene Datei: app/page.tsx

Aktueller Stand: [Beschreibung]

Fehler (falls vorhanden): [Fehlermeldung]
```

---

## ğŸ¯ ENTWICKLUNGS-RICHTLINIEN

### Code-Stil:
- TypeScript verwenden
- Funktionale Komponenten mit Hooks
- Klare, beschreibende Variablennamen
- Kommentare auf Deutsch
- Emojis in UI-Texten ğŸ‘

### Supabase:
- Immer Row Level Security (RLS) beachten
- Policies fÃ¼r alle Tabellen definieren
- `auth.uid()` fÃ¼r User-Zugriff nutzen

### Sicherheit:
- Keine Secrets im Code
- Service Role Key nur Server-Side
- Input-Validierung auf Client & Server
- XSS-Schutz durch React

### UI/UX:
- Mobile-First Design
- Loading States zeigen
- Fehler benutzerfreundlich anzeigen
- Erfolgs-Feedback geben

---

## ğŸ“š NÃœTZLICHE BEFEHLE

```bash
# Development starten
npm run dev

# Dependencies installieren
npm install

# Build fÃ¼r Produktion
npm run build

# TypeScript prÃ¼fen
npx tsc --noEmit

# Supabase SQL Editor Ã¶ffnen
# â†’ Dashboard â†’ SQL Editor
```

---

## ğŸ› BEKANNTE PROBLEME & LÃ–SUNGEN

### Problem: "Cannot find module '@/lib/supabase'"
**LÃ¶sung:** PrÃ¼fe ob `lib/supabase.ts` existiert und korrekt exportiert

### Problem: "Policy violation" in Supabase
**LÃ¶sung:** RLS Policies prÃ¼fen, SQL Script nochmal ausfÃ¼hren

### Problem: API Route gibt 404
**LÃ¶sung:** Server neu starten, Dateipfad prÃ¼fen

### Problem: Login funktioniert nicht
**LÃ¶sung:** PrÃ¼fe ob User in `users` Tabelle existiert mit korrekter Rolle

---

## ğŸ“ NÃ„CHSTE SCHRITTE

**Wenn du in einem neuen Chat weitermachen mÃ¶chtest:**

1. Kopiere dieses ganze Briefing in den Chat
2. ErklÃ¤re, was du tun mÃ¶chtest
3. Lade relevante Dateien hoch (z.B. `page.tsx`)
4. Claude weiÃŸ dann sofort Bescheid! ğŸ‰

---

## âœ… CHECKLISTE FÃœR NEUE CHAT-SESSION

- [ ] PROJECT-BRIEFING.md kopiert
- [ ] ErklÃ¤rt was ich tun mÃ¶chte
- [ ] Relevante Dateien hochgeladen
- [ ] Fehlermeldungen (falls vorhanden) kopiert
- [ ] Aktuellen Stand beschrieben

---

**Letzte Aktualisierung:** November 2025
**Version:** 2.0 (mit Auth-System)

---

## ğŸ’¡ TIPPS

- **Speichere dieses Dokument als `PROJECT-BRIEFING.md` in deinem Projekt**
- **Committe es auf GitHub** (kein Secret drin!)
- **Verwende es fÃ¼r jeden neuen Chat**
- **Aktualisiere es, wenn sich etwas Ã¤ndert**

---

**Viel Erfolg mit deinem Projekt! ğŸš€**
